<div class='component-gui'>
	<div class='nav has-shadow'>
		<div class='nav-left'>
			<div class="nav-item">
				<span class='brand'><a href="https://github.com/mermade/openapi-gui">OpenApi-GUI v3</a></span>
			</div>
		</div>
		<div class="nav-right">
			<div class='nav-item'>
				<a class="btn btn-info pull-right" v-on:click="scrollTop()"><i class='icon-white icon-arrow-up'></i> Top</a>
				<a class="btn btn-info pull-right" v-on:click="save()"><i class='icon-white icon-save'></i> Save</a>
				<a class="btn btn-info pull-right" v-on:click="undo()"><i class='icon-white icon-undo'></i> Undo</a>
				<a class="btn btn-info pull-right" target="_blank" href="https://twitter.com/share?source=tweetbutton&text=OpenApi-Gui%20Visual%20editor%20for%20%23OpenApi%23.0.x%20Via%20%40PermittedSoc&url=https%3A%2F%2Fgithub.com%2FMermade%2Fopenapi-gui"><i class='icon-white icon-twitter'></i></a>
				<a class="btn btn-info pull-right" target="_blank" href="https://twitter.com/intent/follow?screen_name=PermittedSoc"><i class='icon-white icon-twitter'></i> Follow</a>
				<a class='btn btn-info pull-right' target="_blank" href="https://github.com/mermade/openapi-gui"><i class='icon-white icon-github'></i> GitHub</a>
			</div>
		</div>
	</div>

	<div id="alert" class="modal">
  		<div class="modal-background"></div>
  		<div class="modal-content">
			<article class="message">
				<div class="message-body">
    				<span id="alertText"></span>
				</div>
			</article>
  		</div>
  		<button id="alertClose" class="modal-close"></button>
	</div>

	<div class='container-fluid' role='main'>
		<div class='row-fluid'>

			<a id='scrollTop'></a>
			<ul id="section-tabs" class='tabs is-boxed'>
				<li class="tabItem" id="tabItem-about">
					<a class="tabSelect" href="#about" v-on:click="selectTab('about',$event)">
						<span class="icon is-small"><i class="icon-info-sign"></i></span>
						<span>About</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-input" v-on:click="selectTab('input',$event)">
					<a class="tabSelect" href='#input' id="input-tab">
						<span class="icon is-small"><i class='icon-upload'></i></span>
						<span>Load</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-header">
					<a class="tabSelect" href='#header' id="header-tab" v-on:click="selectTab('header',$event)">
						<span class="icon is-small"><i class='icon-h-sign'></i></span>
						<span>Header</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-servers">
					<a class="tabSelect" href='#servers' id="servers-tab" v-on:click="selectTab('servers',$event)">
						<span class="icon is-small"><i class='icon-cloud'></i></span>
						<span>Servers</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-security">
					<a class="tabSelect" href='#security' id="security-tab" v-on:click="selectTab('security',$event)">
						<span class="icon is-small"><i class='icon-lock'></i></span>
						<span>Security</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-tags">
					<a class="tabSelect" href='#tags' id="tags-tab" v-on:click="selectTab('tags',$event)">
						<span class="icon is-small"><i class='icon-tag'></i></span>
						<span>Tags</span>
					</a>
				</li>
				<li class='tabItem is-active' id="tabItem-editor">
					<a class="tabSelect" href='#editor' id="editor-tab" v-on:click="selectTab('editor',$event)">
						<span class="icon is-small"><i class='icon-edit'></i></span>
						<span>Edit</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-output">
					<a class="tabSelect" href='#output' id="output-tab" v-on:click="renderOutput($event)">
						<span class="icon is-small"><i class='icon-file'></i></span>
						<span>Export JSON</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-yaml">
					<a class="tabSelect" href='#yaml' id="yaml-tab" v-on:click="renderOutputYaml($event)">
						<span class="icon is-small"><i class='icon-file'></i></span>
						<span>Export YAML</span>
					</a>
				</li>
			</ul>

			<div class='tab-content'>

				<div class="tab-pane hidden" id="about">
					<h1 class="title">What is OpenApi-gui?</h1>
					OpenApi-gui is a GUI for creating and updating <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md">
					OpenApi 3.0.x</a> definitions.<br>
					<br>
					<h2 class="subtitle">How does OpenApi-gui work?</h2>
					Upload an existing definition, or create a new one (select the red 'trash-can' button to remove all Paths) and
					start adding Paths, Operations, and Parameters. When an existing definition is used, it is parsed and forms for editing
					each Path, Operation and Parameter will be created.
					<br>
					<br> By default when OpenApi-gui starts, it loads the OpenApi Petstore sample.
					<br>
					<br> Click an item from the menu on the left to begin editing. View the JSON/YAML output at any time by selecting the
					"Export" tabs. When finished, click "Download" or Copy" to copy the output to your clipboard. OpenApi-gui saves data
					only to your browser's local-storage. Data is saved before destructive edits (deletions) and when the "Save" button
					is pressed. "Undo" will return to the last-saved state. Make sure you save your JSON/YAML output when finished.
				</div>

				<div class="tab-pane hidden" id="input">
				    <div class="columns">
					<div class="column is-10">
					<textarea class="service-input is-fullwidth" v-model="importschema.text"></textarea>
					</div>
					<div class="column">
					<a class='btn btn-primary pull-right' id="load-definition" v-on:click="loadSchema()">
						<i class='icon-upload icon-white'></i> Load Definition
					</a>
					</div>
					</div>
				</div>

				<div class="tab-pane hidden" id="header">
					<div class="content forms span10">
						<form class="plain-form form-horizontal" id="frmHeader">

							<div class='control-group'>
								<label class='control-label'> Title </label>
								<div class='controls'>
									<input class="span4" v-model="openapi.info.title">
								</div>
							</div>
							<div class='control-group'>
								<label class='control-label'> Version </label>
								<div class='controls'>
									<input class="span4" v-model="openapi.info.version">
								</div>
							</div>
							<div class='control-group'>
								<label class='control-label'> Description </label>
								<div class='controls'>
									<textarea class="span6" v-model="openapi.info.description"></textarea>
								</div>
							</div>
							<!--
							<div class='control-group'>
								<label class='control-label'> Protocol </label>
								<div class='controls'>
									<div class="checkbox">
										<input type="checkbox" id="chkScheme" value="http" v-model="openapi.schemes">HTTP<br>
										<input type="checkbox" id="chkScheme" value="https" v-model="openapi.schemes">HTTPS<br>
										<input type="checkbox" id="chkScheme" value="ws" v-model="openapi.schemes">WebSocket<br>
										<input type="checkbox" id="chkScheme" value="wss" v-model="openapi.schemes">WebSocket Secure<br>
									</div>
								</div>
							</div>
							<div class='control-group'>
								<label class='control-label'> Host </label>
								<div class='controls'>
									<input class="span4" v-model="openapi.host">
								</div>
							</div>
							<div class='control-group'>
								<label class='control-label'> BasePath </label>
								<div class='controls'>
									<input class="span6" v-model="openapi.basePath">
								</div>
							</div>
							-->
							<div class='control-group level'>
								<label class='control-label level-item'> Contact Name </label>
								<div class='controls level-item'>
									<input class="span6" v-model="openapi.info.contact.name">
								</div>
							</div>
							<div class='control-group level'>
								<label class='control-label level-item'> Contact Email </label>
								<div class='controls level-item'>
									<input type="email" class="span6" v-model="openapi.info.contact.email">
								</div>
							</div>
							<div class='control-group'>
								<label class='control-label'> Contact URL </label>
								<div class='controls'>
									<input type="url" class="span6" v-model="openapi.info.contact.url">
								</div>
							</div>
							<div class='control-group'>
								<label class='control-label'> Terms of Service URL </label>
								<div class='controls'>
									<input type="url" class="span6" v-model="openapi.info.termsOfService">
								</div>
							</div>
							<div class='control-group'>
								<label class='control-label'> License Name </label>
								<div class='controls'>
									<input class="span4" v-model="openapi.info.license.name">
								</div>
							</div>
							<div class='control-group'>
								<label class='control-label'> License URL </label>
								<div class='controls'>
									<input type="url" class="span6" v-model="openapi.info.license.url">
								</div>
							</div>
							<div class='control-group'>
								<label class='control-label'> External Docs </label>
								<div class='controls'>
									<textarea class="span6" v-model="openapi.externalDocs.description"></textarea>
								</div>
							</div>
							<div class='control-group'>
								<label class='control-label'> Documentation URL </label>
								<div class='controls'>
									<input type="url" class="span6" v-model="openapi.externalDocs.url">
								</div>
							</div>

						</form>
					</div>
				</div>

				<div class="tab-pane hidden" id="servers">
					<div class="content forms span10">
						<form class="plain-form form-horizontal" id="frmServers">
							<div>
								<a v-on:click="addServer()" class='btn btn-info'><i class='icon-plus icon-white'></i> Add Server</a>
								<br>
								<br>
							</div>
							<div v-for="(server,index) in openapi.servers">
								<div class="well">
									<div class='control-group'>
										<label class='control-label'> URL </label>
										<div class='controls'>
											<input class="span6" v-model="server.url">
											<a v-on:click="removeServer(index)" class='btn btn-danger'><i class='icon-trash icon-white'></i> Delete</a>
										</div>
									</div>
									<div class='control-group'>
										<label class='control-label'> Description </label>
										<div class='controls'>
											<input class="span6" v-model="server.description">
										</div>
									</div>

									<div>
										<a v-on:click="addVariable(index)" class="btn btn-info"><i class="icon-plus icon-white"></i> Add Variable</a>
										<br>
										<br>
									</div>
									<div v-for="(variable,index) in server.variables">
										<div class="well">
											<div class="control-group">
												<label class='control-label'> Name </label>
												<div class="controls">
													<input class="span6" v-model="index" v-model.lazy="variableName">
													<a v-on:click="removeVariable(server,index)" class="btn btn-danger"><i class="icon-trash icon-white"></i> Delete </a>
												</div>
											</div>
											<div class='control-group'>
												<label class='control-label'> Description </label>
												<div class='controls'>
													<input class="span6" v-model="variable.description">
												</div>
											</div>
											<div class='control-group'>
												<label class='control-label'> Default </label>
												<div class='controls'>
													<input class="span6" v-model="variable.default">
												</div>
											</div>
											<div class='control-group'>
												<label class='control-label'> Enum </label>
												<div class='controls'>
													<!-- todo -->
												</div>
											</div>
										</div>
									</div>

								</div>
							</div>
						</form>
					</div>
				</div>

				<div class="tab-pane hidden" id="tags">
					<div class="content forms span10">
						<form class="plain-form form-horizontal" id="frmTags">
							<div>
								<a v-on:click="addTag()" class='btn btn-info'><i class='icon-plus icon-white'></i> Add Tag</a>
								<br>
								<br>
							</div>
							<div v-for="(t,index) in openapi.tags">
								<div class="well">
									<div class='control-group'>
										<label class='control-label'> Name </label>
										<div class='controls'>
											<input class="span6" v-model="t.name">
											<i v-on:click="removeTag(index)" class='btn btn-danger icon-trash icon-white'></i>
										</div>
									</div>
									<div class='control-group'>
										<label class='control-label'> Description </label>
										<div class='controls'>
											<textarea class="span6" v-model="t.description"></textarea>
										</div>
									</div>
									<div class='control-group'>
										<label class='control-label'> External Docs </label>
										<div class='controls'>
											<textarea class="span6" v-model="t.externalDocs.description"></textarea>
										</div>
									</div>
									<div class='control-group'>
										<label class='control-label'> Docs URL </label>
										<div class='controls'>
											<input type="url" class="span6" v-model="t.externalDocs.url">
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>

				<div class="tab-pane hidden" id="security">
					<div class="content forms span10">
						<form class="plain-form form-horizontal" id="frmSecurity">
							<div>
								<a class="btn btn-info" v-on:click="addSecurityDefinition()"><i class='icon-plus icon-white'></i> Add Security Definition</a>
								<br>
								<br>
							</div>
							<api-secdef v-for="(sd, sdname) in openapi.components.securitySchemes" :sd='sd' :sdname='sdname' :openapi='openapi' inline-template>
								<div class="well">
									<div class='control-group'>
										<label class='control-label'> Name </label>
										<div class='controls'>
											<input class="span6" v-model.lazy="secname">
											<a v-on:click="removeSecurityDefinition(sdname)" class='btn btn-danger'><i class='icon-trash icon-white'></i> Delete</a>
										</div>
									</div>
									<div class='control-group'>
										<label class='control-label' for="selSdType"> Type </label>
										<div class='controls'>
											<select name="selSdType" v-model="type">
												<option value="apiKey">API Key</option>
												<option value="oauth2">oAuth2</option>
												<option value="http">HTTP Authentication</option>
											</select>
										</div>
									</div>
									<div class='control-group'>
										<label class='control-label'> Apply to all paths </label>
										<div class='controls'>
											<input type='checkbox' :value='sdname' v-model='appliesToAllPaths'>
										</div>
									</div>
									<div v-if="sd.type == 'apiKey'" class='animate-if'>
										<div class='control-group'>
											<label class='control-label'> Parameter Name </label>
											<div class='controls'>
												<input class="span6" v-model="sd.name">
											</div>
										</div>
										<div class='control-group'>
											<label class='control-label'> Location </label>
											<div class='controls'>
												<select name="selLocation" v-model="sd.in">
													<option value="header">Header</option>
													<option value="query">Query</option>
												</select>
											</div>
										</div>
									</div>
									<div v-if="sd.type == 'oauth2'" class='animate-if'>
										<div class='control-group'>
											<label class='control-label'> Implicit Flow </label>
											<div class='controls'>
												<input type='checkbox' v-model='hasImplicit'>
											</div>
										</div>
										<div class='control-group'>
											<label class='control-label'> Password Flow </label>
											<div class='controls'>
												<input type='checkbox' v-model='hasPassword'>
											</div>
										</div>
										<div class='control-group'>
											<label class='control-label'> clientCredentials Flow </label>
											<div class='controls'>
												<input type='checkbox' v-model='hasClientCred'>
											</div>
										</div>
										<div class='control-group'>
											<label class='control-label'> authorizationCode </label>
											<div class='controls'>
												<input type='checkbox' v-model='hasAuthCode'>
											</div>
										</div>

										<div class="well" v-for="(flow,flowName) in sd.flow">
										<!-- reindent -->
										<div class='control-group'>
											<label class='control-label'> Flow: {{ flowName }} </label>
										</div>

										<div class='control-group'>
											<label class='control-label'> Authorization URL </label>
											<div class='controls'>
												<input type="url" class="span6" v-model="flow.authorizationUrl">
											</div>
										</div>
										<div class='control-group'>
											<label class='control-label'> Token URL </label>
											<div class='controls'>
												<input type="url" class="span6" v-model="flow.tokenUrl">
											</div>
										</div>
										<div class='control-group'>
											<label class='control-label'> Refresh URL </label>
											<div class='controls'>
												<input type="url" class="span6" v-model="flow.refreshUrl">
											</div>
										</div>
										<div class='well'>
											<div>
												<a class="btn btn-info" v-on:click="addScope(flow)"><i class='icon-plus icon-white'></i> Add Scope</a>
											</div>
											<api-scope v-for="(sdesc, sname) in flow.scopes" :sd="sd" :sdname="sdname" :sname="sname" :key="sname" :flow="flow" inline-template>
												<div>
													<div class='control-group'>
														<label class='control-label'> Scope Name </label>
														<div class='controls'>
															<input class="span6" v-model.lazy="scopename">
															<a v-on:click="removeScope(flow,sname)" class='btn btn-danger'><i class='icon-trash icon-white'></i> Delete</a>
														</div>
													</div>
													<div class='control-group'>
														<label class='control-label'> Description </label>
														<div class='controls'>
															<input class="span6" v-model="flow.scopes[sname]">
														</div>
													</div>
												</div>
											</api-scope>
										</div>

										</div> <!-- to here -->

									</div>
								</div>
							</api-secdef>
						</form>
					</div>
				</div>

				<div class="tab-pane hidden" id="output">
					<api-definition></api-definition>
				</div>

				<div class="tab-pane hidden" id="yaml">
					<api-yaml></api-yaml>
				</div>

				<div class='tab-pane row-fluid is-active' id='editor'>

					<div class='span2'>
						<div class='sidebar-nav well'>
							<div>
								<a v-on:click="addResource()" class='btn btn-info addButton pull-left'><i class='icon-plus icon-white'></i> Add Path</a>
								<a class="btn btn-danger remButton" v-on:click="removeAll()"><i class='icon-trash icon-white'></i> Remove All</a>
							</div>
							<br>
							<div id="drop-container" class="dropdown open">
								<a id="drop1" href="#" role="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown">
									Navigation <b class="caret"></b>
								</a>
								<ul id="resourceList" class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
									<li class='dropdown-submenu' v-for="(path,key) in openapi.paths">
										<a :href="path.id" target="_self" v-on:click="showResource(key)">{{key}}</a>
										<ul class='dropdown-menu'>
											<li v-for="(m,mkey) in path">
												<template v-if="'.get.post.put.patch.head.options.delete.trace'.indexOf(mkey)>0">
													<a :href="m.id" target="_self" v-on:click="showResource(key)">{{mkey}}</a>
												</template>
											</li>
										</ul>
									</li>
								</ul>
							</div>
						</div>
					</div>

					<div class="content forms span10">
						<form class="form-horizontal" id="config">
							<div class="resource" v-for="(path,key,index) in openapi.paths">
								<api-resource :path='path' :index='key' :maintags='openapi.tags'></api-resource>
							</div>
						</form>
					</div>

				</div>
			</div>
		</div>
	</div>
</div>
