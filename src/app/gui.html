<div class='component-gui'>
	<div class='nav has-shadow'>
		<div class='nav-left'>
			<div class="nav-item">
				<span class='brand'><a href="https://github.com/mermade/openapi-gui">OpenApi-GUI v3</a></span>
			</div>
		</div>
		<div class="nav-right">
			<div class='nav-item'>
				<a class="btn btn-info pull-right" v-on:click="scrollTop()"><i class='icon-white icon-arrow-up'></i> Top</a>
				<a class="btn btn-info pull-right" v-on:click="save()"><i class='icon-white icon-save'></i> Save</a>
				<a class="btn btn-info pull-right" v-on:click="undo()"><i class='icon-white icon-undo'></i> Undo</a>
				<a class="btn btn-info pull-right" target="_blank" href="https://twitter.com/share?source=tweetbutton&text=OpenApi-Gui%20Visual%20editor%20for%20%23OpenApi%23.0.x%20Via%20%40PermittedSoc&url=https%3A%2F%2Fgithub.com%2FMermade%2Fopenapi-gui"><i class='icon-white icon-twitter'></i></a>
				<a class="btn btn-info pull-right" target="_blank" href="https://twitter.com/intent/follow?screen_name=PermittedSoc"><i class='icon-white icon-twitter'></i> Follow</a>
				<a class='btn btn-info pull-right' target="_blank" href="https://github.com/mermade/openapi-gui"><i class='icon-white icon-github'></i> GitHub</a>
			</div>
		</div>
	</div>

	<div id="alert" class="modal">
  		<div class="modal-background"></div>
  		<div class="modal-content">
			<article class="message">
				<div class="message-body">
    				<span id="alertText"></span>
				</div>
			</article>
  		</div>
  		<button id="alertClose" class="modal-close"></button>
	</div>

	<div class='container-fluid' role='main'>
		<div class='row-fluid'>

			<a id='scrollTop'></a>
			<ul id="section-tabs" class='tabs is-boxed'>
				<li class="tabItem" id="tabItem-about">
					<a class="tabSelect" href="#about" v-on:click="selectTab('about',$event)">
						<span class="icon is-small"><i class="icon-info-sign"></i></span>
						<span>About</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-input" v-on:click="selectTab('input',$event)">
					<a class="tabSelect" href='#input' id="input-tab">
						<span class="icon is-small"><i class='icon-upload'></i></span>
						<span>Load</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-header">
					<a class="tabSelect" href='#header' id="header-tab" v-on:click="selectTab('header',$event)">
						<span class="icon is-small"><i class='icon-h-sign'></i></span>
						<span>Header</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-servers">
					<a class="tabSelect" href='#servers' id="servers-tab" v-on:click="selectTab('servers',$event)">
						<span class="icon is-small"><i class='icon-cloud'></i></span>
						<span>Servers</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-security">
					<a class="tabSelect" href='#security' id="security-tab" v-on:click="selectTab('security',$event)">
						<span class="icon is-small"><i class='icon-lock'></i></span>
						<span>Security</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-tags">
					<a class="tabSelect" href='#tags' id="tags-tab" v-on:click="selectTab('tags',$event)">
						<span class="icon is-small"><i class='icon-tag'></i></span>
						<span>Tags</span>
					</a>
				</li>
				<li class='tabItem is-active' id="tabItem-editor">
					<a class="tabSelect" href='#editor' id="editor-tab" v-on:click="selectTab('editor',$event)">
						<span class="icon is-small"><i class='icon-edit'></i></span>
						<span>Edit</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-output">
					<a class="tabSelect" href='#output' id="output-tab" v-on:click="renderOutput($event)">
						<span class="icon is-small"><i class='icon-file'></i></span>
						<span>Export JSON</span>
					</a>
				</li>
				<li class="tabItem" id="tabItem-yaml">
					<a class="tabSelect" href='#yaml' id="yaml-tab" v-on:click="renderOutputYaml($event)">
						<span class="icon is-small"><i class='icon-file'></i></span>
						<span>Export YAML</span>
					</a>
				</li>
			</ul>

			<div class='tab-content'>

				<div class="tab-pane hidden container is-fluid" id="about">
					<h1 class="title">What is OpenApi-gui?</h1>
					OpenApi-gui is a GUI for creating and updating <a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md">
					OpenApi 3.0.x</a> definitions.<br>
					<br>
					<h2 class="subtitle">How does OpenApi-gui work?</h2>
					Upload an existing definition, or create a new one (select the red 'trash-can' button to remove all Paths) and
					start adding Paths, Operations, and Parameters. When an existing definition is used, it is parsed and forms for editing
					each Path, Operation and Parameter will be created.
					<br>
					<br> By default when OpenApi-gui starts, it loads the OpenApi Petstore sample.
					<br>
					<br> Click an item from the menu on the left to begin editing. View the JSON/YAML output at any time by selecting the
					"Export" tabs. When finished, click "Download" or Copy" to copy the output to your clipboard. OpenApi-gui saves data
					only to your browser's local-storage. Data is saved before destructive edits (deletions) and when the "Save" button
					is pressed. "Undo" will return to the last-saved state. Make sure you save your JSON/YAML output when finished.
				</div>

				<div class="tab-pane hidden container is-fluid" id="input">
				    <div class="columns">
					<div class="column is-10">
					<textarea class="service-input is-fullwidth" v-model="importschema.text"></textarea>
					</div>
					<div class="column">
					<a class='button is-primary pull-right' id="load-definition" v-on:click="loadSchema()">
						<i class='icon-upload icon-white'></i> Load Definition
					</a>
					</div>
					</div>
				</div>

				<div class="tab-pane hidden" id="header">
					<div class="container is-fluid">
						<form class="plain-form form-horizontal" id="frmHeader">

							<div class='field is-horizontal'>
								<label class='field-label is-normal label'> Title </label>
								<div class='field-body field control'>
									<input class="input" v-model="openapi.info.title">
								</div>
							</div>
							<div class='field is-horizontal'>
								<label class='field-label is-normal label'> Version </label>
								<div class='field-body field control'>
									<input class="input" v-model="openapi.info.version">
								</div>
							</div>

							<div class="field is-horizontal">
							  <div class="field-label is-normal">
							    <label class="label">Description</label>
							  </div>
							  <div class="field-body">
							    <div class="field">
							      <div class="control">
									<textarea class="textarea" v-model="openapi.info.description"></textarea>
							      </div>
							    </div>
							  </div>
							</div>

							<div class='field is-horizontal'>
								<label class='field-label is-normal label'> Contact Name </label>
								<div class='field-body field control'>
									<input class="input" v-model="openapi.info.contact.name">
								</div>
							</div>

						    <div class="field is-horizontal">
						    	<label class='field-label is-normal label'> Contact Email </label>
 						     <div class="field-body control has-icons-left">
     						   <input class="input" type="email" v-model="openapi.info.contact.email">
      					   	   <i class="icon is-small is-left icon-envelope"></i>
						      </div>
						    </div>

							<div class='field is-horizontal'>
								<label class='field-label is-normal label'> Contact URL </label>
								<div class='field-body field control'>
									<input type="url" class="input" v-model="openapi.info.contact.url">
								</div>
							</div>

							<div class='field is-horizontal'>
								<label class='field-label is-normal label'> Terms of Service URL </label>
								<div class='field-body field control'>
									<input type="url" class="input" v-model="openapi.info.termsOfService">
								</div>
							</div>
							<div class='field is-horizontal'>
								<label class='field-label is-normal label'> License Name </label>
								<div class='field-body field control'>
									<input class="input" v-model="openapi.info.license.name">
								</div>
							</div>
							<div class='field is-horizontal'>
								<label class='field-label is-normal label'> License URL </label>
								<div class='field-body field control'>
									<input type="url" class="input" v-model="openapi.info.license.url">
								</div>
							</div>
							<div class='field is-horizontal'>
								<label class='field-label is-normal label'> External Docs </label>
								<div class='field-body field control'>
									<textarea class="textarea" v-model="openapi.externalDocs.description"></textarea>
								</div>
							</div>
							<div class='field is-horizontal'>
								<label class='field-label is-normal label'> Documentation URL </label>
								<div class='field-body field control'>
									<input type="url" class="input" v-model="openapi.externalDocs.url">
								</div>
							</div>

						</form>
					</div>
				</div>

				<div class="tab-pane hidden" id="servers">
					<div class="container is-fluid">
						<form class="plain-form form-horizontal" id="frmServers">
							<div>
								<a v-on:click="addServer()" class='button is-success'><i class='icon-plus icon-white'></i> Add Server</a>
								<br>
								<br>
							</div>
							<div v-for="(server,index) in openapi.servers">
								<div class="columns well">
									<div class='column is-5 field is-horizontal'>
										<span class="control"><a v-on:click="removeServer(index)" class='button is-danger'><i class='icon-trash icon-white'></i> Delete</a></span>
										<label class='field-label is-normal label'> URL </label>
										<div class='field-body field control'>
											<input class="input" v-model="server.url">
										</div>
									</div>
									<div class='column is-5 field is-horizontal'>
										<label class='field-label is-normal label'> Description </label>
										<div class='field-body field control'>
											<input class="input" v-model="server.description">
										</div>
									</div>

									<div class="column field is-horizontal control">
										<a v-on:click="addVariable(index)" class="button is-success"><i class="icon-plus icon-white"></i> Add Variable</a>
										<br>
										<br>
									</div>
									<div v-for="(variable,index) in server.variables">
										<div class="well">
											<div class="field is-horizontal">
												<label class='field-label is-normal label'> Name </label>
												<div class="field-body field control">
													<input class="input" v-model="index" v-model.lazy="variableName">
													<a v-on:click="removeVariable(server,index)" class="button is-danger"><i class="icon-trash icon-white"></i> Delete </a>
												</div>
											</div>
											<div class='field is-horizontal'>
												<label class='field-label is-normal label'> Description </label>
												<div class='field-body field control'>
													<input class="input" v-model="variable.description">
												</div>
											</div>
											<div class='field is-horizontal'>
												<label class='field-label is-normal label'> Default </label>
												<div class='field-body field control'>
													<input class="input" v-model="variable.default">
												</div>
											</div>
											<div class='field is-horizontal'>
												<label class='field-label is-normal label'> Enum </label>
												<div class='field-body field control'>
													<!-- todo -->
												</div>
											</div>
										</div>
									</div>

								</div>
							</div>
						</form>
					</div>
				</div>

				<div class="tab-pane hidden" id="tags">
					<div class="container is-fluid">
						<form class="x" id="frmTags">
							<div>
								<a v-on:click="addTag()" class='button is-success'><i class='icon-plus icon-white'></i> Add Tag</a>
								<br>
								<br>
							</div>
							<div v-for="(t,index) in openapi.tags">
								<div class="well">
									<div class='field is-horizontal'>
										<label class='field-label is-normal label'> Name </label>
										<div class='field-body field control'>
											<input class="input" v-model="t.name">
											<i v-on:click="removeTag(index)" class='button is-danger icon-trash icon-white'></i>
										</div>
									</div>
									<div class='field is-horizontal'>
										<label class='field-label is-normal label'> Description </label>
										<div class='field-body field control'>
											<textarea class="textarea" v-model="t.description"></textarea>
										</div>
									</div>
									<div class='field is-horizontal'>
										<label class='field-label is-normal label'> External Docs </label>
										<div class='field-body field control'>
											<textarea class="textarea" v-model="t.externalDocs.description"></textarea>
										</div>
									</div>
									<div class='field is-horizontal'>
										<label class='field-label is-normal label'> Docs URL </label>
										<div class='field-body field control'>
											<input type="url" class="input" v-model="t.externalDocs.url">
										</div>
									</div>
								</div>
							</div>
						</form>
					</div>
				</div>

				<div class="tab-pane hidden" id="security">
					<div class="content forms span10">
						<form class="plain-form form-horizontal" id="frmSecurity">
							<div>
								<a class="button is-success" v-on:click="addSecurityDefinition()"><i class='icon-plus icon-white'></i> Add Security Definition</a>
								<br>
								<br>
							</div>
							<api-secdef v-for="(sd, sdname) in openapi.components.securitySchemes" :sd='sd' :sdname='sdname' :openapi='openapi' inline-template>
								<div class="container is-fluid">
									<div class='field is-horizontal'>
										<label class='field-label is-normal label'> Name </label>
										<div class='field-body field control'>
											<input class="input" v-model.lazy="secname">
											<a v-on:click="removeSecurityDefinition(sdname)" class='button is-danger'><i class='icon-trash icon-white'></i> Delete</a>
										</div>
									</div>
									<div class='field is-horizontal'>
										<label class='field-label is-normal label' for="selSdType"> Type </label>
										<div class='field-body field control'>
											<select name="selSdType" v-model="type">
												<option value="apiKey">API Key</option>
												<option value="oauth2">oAuth2</option>
												<option value="http">HTTP Authentication</option>
											</select>
										</div>
									</div>
									<div class='field is-horizontal'>
										<label class='field-label is-normal label'> Apply to all paths </label>
										<div class='field-body field control'>
											<input type='checkbox' :value='sdname' v-model='appliesToAllPaths'>
										</div>
									</div>
									<div v-if="sd.type == 'apiKey'" class='animate-if'>
										<div class='field is-horizontal'>
											<label class='field-label is-normal label'> Parameter Name </label>
											<div class='field-body field control'>
												<input class="input" v-model="sd.name">
											</div>
										</div>
										<div class='field is-horizontal'>
											<label class='field-label is-normal label'> Location </label>
											<div class='field-body field control'>
												<select name="selLocation" v-model="sd.in">
													<option value="header">Header</option>
													<option value="query">Query</option>
												</select>
											</div>
										</div>
									</div>
									<div v-if="sd.type == 'oauth2'" class='animate-if'>
										<div class='field is-horizontal'>
											<label class='field-label is-normal label'> Implicit Flow </label>
											<div class='field-body field control'>
												<input type='checkbox' class="checkbox" v-model='hasImplicit'>
											</div>
										</div>
										<div class='field is-horizontal'>
											<label class='field-label is-normal label'> Password Flow </label>
											<div class='field-body field control'>
												<input type='checkbox' class="checkbox" v-model='hasPassword'>
											</div>
										</div>
										<div class='field is-horizontal'>
											<label class='field-label is-normal label'> clientCredentials Flow </label>
											<div class='field-body field control'>
												<input type='checkbox' class="checkbox" v-model='hasClientCred'>
											</div>
										</div>
										<div class='field is-horizontal'>
											<label class='field-label is-normal label'> authorizationCode </label>
											<div class='field-body field control'>
												<input type='checkbox' class="checkbox" v-model='hasAuthCode'>
											</div>
										</div>

										<div class="well" v-for="(flow,flowName) in sd.flow">
										<!-- reindent -->
										<div class='field is-horizontal'>
											<label class='field-label is-normal label'> Flow: {{ flowName }} </label>
										</div>

										<div class='field is-horizontal'>
											<label class='field-label is-normal label'> Authorization URL </label>
											<div class='field-body field control'>
												<input type="url" class="input" v-model="flow.authorizationUrl">
											</div>
										</div>
										<div class='field is-horizontal'>
											<label class='field-label is-normal label'> Token URL </label>
											<div class='field-body field control'>
												<input type="url" class="input" v-model="flow.tokenUrl">
											</div>
										</div>
										<div class='field is-horizontal'>
											<label class='field-label is-normal label'> Refresh URL </label>
											<div class='field-body field control'>
												<input type="url" class="input" v-model="flow.refreshUrl">
											</div>
										</div>
										<div class='well'>
											<div>
												<a class="button is-success" v-on:click="addScope(flow)"><i class='icon-plus icon-white'></i> Add Scope</a>
											</div>
											<api-scope v-for="(sdesc, sname) in flow.scopes" :sd="sd" :sdname="sdname" :sname="sname" :key="sname" :flow="flow" inline-template>
												<div>
													<div class='field is-horizontal'>
														<label class='field-label is-normal label'> Scope Name </label>
														<div class='field-body field control'>
															<input class="input" v-model.lazy="scopename">
															<a v-on:click="removeScope(flow,sname)" class='button is-danger'><i class='icon-trash icon-white'></i> Delete</a>
														</div>
													</div>
													<div class='field is-horizontal'>
														<label class='field-label is-normal label'> Description </label>
														<div class='field-body field control'>
															<input class="input" v-model="flow.scopes[sname]">
														</div>
													</div>
												</div>
											</api-scope>
										</div>

										</div> <!-- to here -->

									</div>
								</div>
							</api-secdef>
						</form>
					</div>
				</div>

				<div class="tab-pane hidden" id="output">
					<api-definition></api-definition>
				</div>

				<div class="tab-pane hidden" id="yaml">
					<api-yaml></api-yaml>
				</div>

				<div class='tab-pane is-active' id='editor'>

					<div class='container is-fluid columns'>
						<div class='column is-2'>
							<div>
								<a v-on:click="addResource()" class='button is-success addButton pull-left'><i class='icon-plus icon-white'></i> Add Path</a>
								<a class="button is-danger remButton" v-on:click="removeAll()"><i class='icon-trash icon-white'></i> Remove All</a>
							</div>
							<br>
							<aside id="drop-container" class="menu menu-small">
								<ul id="resourceList" class="menu-list" role="menu" aria-labelledby="dropdownMenu">
									<li class='dropdown-submenu' v-for="(path,key) in openapi.paths">
										<a :href="path.id" target="_self" v-on:click="showResource(key)">{{key}}</a>
										<ul class='dropdown-menu'>
											<li v-for="(m,mkey) in path">
												<template v-if="'.get.post.put.patch.head.options.delete.trace'.indexOf(mkey)>0">
													<a :href="m.id" target="_self" v-on:click="showResource(key)">{{mkey}}</a>
												</template>
											</li>
										</ul>
									</li>
								</ul>
							</aside>
						</div>

						<div class="column">
							<form class="form-horizontal" id="config">
								<div class="resource" v-for="(path,key,index) in openapi.paths">
									<api-resource :path='path' :index='key' :maintags='openapi.tags'></api-resource>
								</div>
							</form>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
</div>
